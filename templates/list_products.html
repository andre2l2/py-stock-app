<!DOCTYPE html>
<html lang="en">
  {% include 'head.html' %}
  <body>
    <section class="container">
      <h1 class="text-center">Products</h1>

      <div class="py-2">
        <a class="btn btn-primary" href="/create">
          <i class="bi bi-plus-circle"></i>
          New product
        </a>
      </div>

      <table class="table table-primary table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Stock Total</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td class="col-1">{{ item.id }}</td>
            <td class="col-1">{{ item.name }}</td>
            <td class="col-1">{{ item.price }}</td>
            <td class="col-1">{{ item.stock_total }}</td>
            <td class="col-1">
              <button
                class="btn btn-danger btn-sm"
                onclick="deleteProduct(`{{ item.id }}`)"
              >
                <i class="bi bi-trash-fill"></i>
              </button>
              <a class="btn btn-warning btn-sm" href="/update/{{ item.id }}">
                <i class="bi bi-pencil-square"></i>
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </body>

  <script>
    async function deleteProduct(id = "") {
      const response = await fetch(`/${id}`, {
        method: "DELETE",
      });

      window.location.reload();
    }
  </script>
</html>
